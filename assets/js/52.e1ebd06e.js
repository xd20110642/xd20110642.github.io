(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{321:function(t,n,e){"use strict";e.r(n);var o=e(22),i=Object(o.a)({},function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h3",{attrs:{id:"performance-前端性能检测"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#performance-前端性能检测","aria-hidden":"true"}},[t._v("#")]),t._v(" Performance 前端性能检测")]),t._v(" "),e("ul",[e("li",[e("p",[t._v("这个方法是不需要使用"),e("code",[t._v("new")]),t._v("的可直接定义，切记这个方法首字母不是大写的！！！")]),t._v(" "),e("pre",[e("code",[t._v("  var Performance=window.performance;\n  Performance包含三个对象:\n  var {memory,navigation,timing}=Performance;\n\n  memory: 显示此刻的内存占用 里面有三个属性\n      jsHeapSizeLimit该属性代表的含义是：内存大小的限制。\n\n      totalJSHeapSize表示 总内存的大小。\n\n      usedJSHeapSize表示可使用的内存的大小。\n  如果 usedJSHeapSize 大于了 totalJSHeapSize 说明发生了内存泄漏\n\n  navigation：页面来源信息\n      redirectCount:如果有重定向的话，页面通过几次重定向跳转而来，默认为0\n      type:页面打开的方式\n          0（TYPE_NAVIGATE）:表示正常进入该页面(非刷新、非重定向)。\n\n          1（TYPE_RELOAD :刷新页面。\n\n          2（TYPE_BACK_FORWARD ）：表示通过浏览器的前进、后退按钮进入的页面\n\n          255（TYPE_RESERVED）：表示非以上的方式进入页面的。\n  \n  timing:是关键时间点 (借用奇舞周刊的一张图)\n")])]),t._v(" "),e("img",{attrs:{src:"https://user-gold-cdn.xitu.io/2018/8/20/16555cb56942d42b?imageView2/0/w/1280/h/960/format/webp/ignore-error/1"}}),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("属性名")]),t._v(" "),e("th",[t._v("含义")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("navigationStart")]),t._v(" "),e("td",[t._v("浏览器窗口的前一个网页关闭时发生unload事件时的Unix时间戳，属于最前的测量时间点")])]),t._v(" "),e("tr",[e("td",[t._v("unloadEventEnd")]),t._v(" "),e("td",[t._v("前网页与当前网页同属一个域名时，返回前一个网页unload事件的回调函数结束时的Unix时间戳")])]),t._v(" "),e("tr",[e("td",[t._v("redirectStart")]),t._v(" "),e("td",[t._v("返回第一个HTTP跳转开始时的Unix时间戳")])]),t._v(" "),e("tr",[e("td",[t._v("redirectEnd")]),t._v(" "),e("td",[t._v("返回最后一个HTTP跳转结束时的Unix时间戳")])]),t._v(" "),e("tr",[e("td",[t._v("fetchStart")]),t._v(" "),e("td",[t._v("返回浏览器准备使用HTTP请求读取文档等资源时的Unix时间戳，在网页查询本地缓存之前发生")])]),t._v(" "),e("tr",[e("td",[t._v("domainLookupStart")]),t._v(" "),e("td",[t._v("返回域名查询开始时的Unix时间戳。如果使用持久连接，或者信息是从本地缓存获取的，则返回值等同于fetchStart属性的值")])]),t._v(" "),e("tr",[e("td",[t._v("domainLookupEnd")]),t._v(" "),e("td",[t._v("返回域名查询结束时的Unix毫秒时间戳。如果使用持久连接，或者信息是从本地缓存获取的，则返回值等同于fetchStart属性的值")])]),t._v(" "),e("tr",[e("td",[t._v("connectStart")]),t._v(" "),e("td",[t._v("返回HTTP请求开始向服务器发送时的Unix毫秒时间戳。如果使用持久连接（persistent connection），则返回值等同于fetchStart属性的值")])]),t._v(" "),e("tr",[e("td",[t._v("connectEnd")]),t._v(" "),e("td",[t._v("返回浏览器与服务器之间的连接建立时的Unix毫秒时间戳。如果建立的是持久连接，则返回值等同于fetchStart属性的值。连接建立指的是所有握手和认证过程全部结束")])]),t._v(" "),e("tr",[e("td",[t._v("secureConnectionStart")]),t._v(" "),e("td",[t._v("返回浏览器与服务器开始安全链接的握手时的Unix毫秒时间戳。如果当前网页不要求安全连接，则返回0")])]),t._v(" "),e("tr",[e("td",[t._v("requestStart")]),t._v(" "),e("td",[t._v("返回浏览器向服务器发出HTTP请求时（或开始读取本地缓存时）的Unix毫秒时间戳")])]),t._v(" "),e("tr",[e("td",[t._v("responseStart")]),t._v(" "),e("td",[t._v("返回浏览器从服务器收到（或从本地缓存读取）第一个字节时的Unix毫秒时间戳")])]),t._v(" "),e("tr",[e("td",[t._v("responseEnd")]),t._v(" "),e("td",[t._v("返回浏览器从服务器收到（或从本地缓存读取）最后一个字节时（如果在此之前HTTP连接已经关闭，则返回关闭时）的Unix毫秒时间戳")])]),t._v(" "),e("tr",[e("td",[t._v("domLoading")]),t._v(" "),e("td",[t._v("返回当前网页DOM结构开始解析时（即Document.readyState属性变为“loading”、相应的readystatechange事件触发时）的Unix毫秒时间戳")])]),t._v(" "),e("tr",[e("td",[t._v("domInteractive")]),t._v(" "),e("td",[t._v("返回当前网页DOM结构结束解析、开始加载内嵌资源时（即Document.readyState属性变为“interactive”、相应的readystatechange事件触发时）的Unix毫秒时间戳")])]),t._v(" "),e("tr",[e("td",[t._v("domContentLoadedEventStart")]),t._v(" "),e("td",[t._v("返回当前网页DOMContentLoaded事件发生时（即DOM结构解析完毕、所有脚本开始运行时）的Unix毫秒时间戳")])]),t._v(" "),e("tr",[e("td",[t._v("domContentLoadedEventEnd")]),t._v(" "),e("td",[t._v("返回当前网页所有需要执行的脚本执行完成时的Unix毫秒时间戳")])]),t._v(" "),e("tr",[e("td",[t._v("domComplete")]),t._v(" "),e("td",[t._v("返回当前网页DOM结构生成时（即Document.readyState属性变为“complete”，以及相应的readystatechange事件发生时）的Unix毫秒时间戳")])]),t._v(" "),e("tr",[e("td",[t._v("loadEventStart")]),t._v(" "),e("td",[t._v("返回当前网页load事件的回调函数开始时的Unix毫秒时间戳。如果该事件还没有发生，返回0")])]),t._v(" "),e("tr",[e("td",[t._v("loadEventEnd")]),t._v(" "),e("td",[t._v("返回当前网页load事件的回调函数运行结束时的Unix毫秒时间戳。如果该事件还没有发生，返回0")])])])]),t._v(" "),e("p",[t._v("常用方法:")]),t._v(" "),e("pre",[e("code",[t._v("  window.onload = function() {\n  var timing  = performance.timing;\n  console.log('准备新页面时间耗时: ' + timing.fetchStart - timing.navigationStart);\n  console.log('redirect 重定向耗时: ' + timing.redirectEnd  - timing.redirectStart);\n  console.log('Appcache 耗时: ' + timing.domainLookupStart  - timing.fetchStart);\n  console.log('unload 前文档耗时: ' + timing.unloadEventEnd - timing.unloadEventStart);\n  console.log('DNS 查询耗时: ' + timing.domainLookupEnd - timing.domainLookupStart);\n  console.log('TCP连接耗时: ' + timing.connectEnd - timing.connectStart);\n  console.log('request请求耗时: ' + timing.responseEnd - timing.requestStart);\n  console.log('白屏时间: ' + timing.responseStart - timing.navigationStart);\n  console.log('请求完毕至DOM加载: ' + timing.domInteractive - timing.responseEnd);\n  console.log('解释dom树耗时: ' + timing.domComplete - timing.domInteractive);\n  console.log('从开始至load总耗时: ' + timing.loadEventEnd - timing.navigationStart);\n  }\n  都是毫秒值\n")])])])]),t._v(" "),e("p",[t._v("参考文章:")]),t._v(" "),e("ol",[e("li",[e("a",{attrs:{href:"https://juejin.im/post/5dd4a0de5188254f98605ff9"}},[t._v("参考文章1")])]),t._v(" "),e("li",[e("a",{attrs:{href:"https://www.jianshu.com/p/1355232d525a"}},[t._v("参考文章2")])])])])},[],!1,null,null,null);n.default=i.exports}}]);